---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
---

<Layout title="Manolia Kocaoglu - Designer Creative">
	<!-- Header -->
	<Header currentPage="accueil" />

	<!-- Grille de fond -->
	<div class="grid-bg"></div>
	
	<!-- Éléments décoratifs pixelisés -->
	<div class="pixel-decorations">
		<div class="pixel-shape" style="top: 10%; left: 5%;"></div>
		<div class="pixel-shape" style="top: 20%; left: 20%;"></div>
		<div class="pixel-shape" style="top: 30%; right: 5%;"></div>
		<div class="pixel-shape" style="top: 50%; left: 10%;"></div>
		<div class="pixel-shape" style="bottom: 20%; right: 15%;"></div>
		<div class="pixel-shape" style="bottom: 30%; left: 15%;"></div>
		<div class="pixel-cross" style="top: 15%; right: 20%;"></div>
		<div class="pixel-cross" style="bottom: 15%; left: 20%;"></div>
		<div class="pixel-plus" style="top: 40%; right: 10%;"></div>
		<div class="pixel-plus" style="bottom: 40%; left: 5%;"></div>
	</div>

	<div class="container">
		<!-- Zone principale -->
		<main class="main-content">
			<!-- Personnage central avec contrôles -->
			<div class="character-section">
				<!-- Flèches autour du personnage -->
				<button class="arrow-btn arrow-top" id="arrowTop" title="Changer couleur cheveux">
					<svg viewBox="0 0 50 50" width="50" height="50">
						<polygon points="10,35 25,15 40,35" fill="white"/>
					</svg>
				</button>
				
				<button class="arrow-btn arrow-left" id="arrowLeft" title="Couleur précédente hoodie">
					<svg viewBox="0 0 50 50" width="60" height="60">
						<polygon points="35,10 15,25 35,40" fill="white"/>
					</svg>
				</button>

				<!-- Personnage principal -->
				<div class="character-wrapper">
					<div id="character" class="character"></div>
				</div>

				<button class="arrow-btn arrow-right" id="arrowRight" title="Couleur suivante hoodie">
					<svg viewBox="0 0 50 50" width="60" height="60">
						<polygon points="15,10 35,25 15,40" fill="white"/>
					</svg>
				</button>

				<button class="arrow-btn arrow-bottom" id="arrowBottom" title="Changer couleur cheveux">
					<svg viewBox="0 0 50 50" width="50" height="50">
						<polygon points="10,15 25,35 40,15" fill="white"/>
					</svg>
				</button>

				<!-- Plateforme sous le perso -->
				<div class="platform"></div>
			</div>

			<!-- Titre & Subtitle à droite -->
			<div class="hero-text">
				<h1>DESIGNER<br/>CREATIVE</h1>
				<p class="subtitle">Joueur: Manolia Kocaoglu</p>
			</div>
		</main>
	</div>
</Layout>

<style>
	:global(body) {
		background: #1a237e;
		margin: 0;
		padding: 0;
		overflow-x: hidden;
	}

	.grid-bg {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-image: 
			linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
			linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
		background-size: 50px 50px;
		z-index: 0;
	}

	.pixel-decorations {
		position: fixed;
		width: 100%;
		height: 100%;
		top: 0;
		left: 0;
		z-index: 1;
		pointer-events: none;
	}

	.pixel-shape {
		position: absolute;
		width: 20px;
		height: 20px;
		background: rgba(255, 255, 255, 0.1);
		animation: float 3s ease-in-out infinite;
	}

	.pixel-cross {
		position: absolute;
		width: 16px;
		height: 16px;
		background: 
			linear-gradient(rgba(255,255,255,0.15) 6px, transparent 6px, transparent 10px, rgba(255,255,255,0.15) 10px),
			linear-gradient(90deg, rgba(255,255,255,0.15) 6px, transparent 6px, transparent 10px, rgba(255,255,255,0.15) 10px);
		animation: float 4s ease-in-out infinite;
		animation-delay: 1s;
	}

	.pixel-plus {
		position: absolute;
		width: 12px;
		height: 12px;
		background: rgba(255,255,255,0.1);
		clip-path: polygon(
			40% 0%, 60% 0%, 60% 40%, 100% 40%, 
			100% 60%, 60% 60%, 60% 100%, 40% 100%, 
			40% 60%, 0% 60%, 0% 40%, 40% 40%
		);
		animation: float 3.5s ease-in-out infinite;
		animation-delay: 2s;
	}

	@keyframes float {
		0%, 100% { transform: translateY(0); opacity: 0.6; }
		50% { transform: translateY(-15px); opacity: 1; }
	}

	.container {
		position: relative;
		z-index: 2;
		min-height: 100vh;
		padding: 140px 40px 40px;
	}

	.main-content {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 60px;
		align-items: center;
		max-width: 1400px;
		margin: 0 auto;
	}

	.character-section {
		position: relative;
		display: flex;
		align-items: center;
		justify-content: center;
		min-height: 600px;
	}

	.character-wrapper {
		position: relative;
		z-index: 3;
	}

	.character {
		width: 400px;
		height: 600px;
		filter: drop-shadow(0 20px 40px rgba(0,0,0,0.5));
		animation: idle 3s ease-in-out infinite;
		transition: transform 0.5s ease;
	}

	@keyframes idle {
		0%, 100% { transform: translateY(0); }
		50% { transform: translateY(-20px); }
	}

	.platform {
		position: absolute;
		bottom: 20px;
		width: 400px;
		height: 60px;
		background: radial-gradient(ellipse, rgba(13, 27, 62, 0.8) 0%, transparent 70%);
		border-radius: 50%;
		filter: blur(20px);
		z-index: 2;
	}

	.arrow-btn {
		position: absolute;
		background: transparent;
		border: none;
		cursor: pointer;
		transition: all 0.3s;
		z-index: 4;
		filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
	}

	.arrow-btn:hover {
		transform: scale(1.2);
		filter: drop-shadow(0 0 20px rgba(255,255,255,0.8));
	}

	.arrow-top {
		top: 20px;
		left: 50%;
		transform: translateX(-50%);
	}

	.arrow-bottom {
		bottom: 100px;
		left: 50%;
		transform: translateX(-50%);
	}

	.arrow-left {
		left: 50px;
		top: 50%;
		transform: translateY(-50%);
	}

	.arrow-right {
		right: 50px;
		top: 50%;
		transform: translateY(-50%);
	}

	.hero-text {
		text-align: center;
	}

	h1 {
		font-size: clamp(2.5rem, 6vw, 5rem);
		color: white;
		text-shadow: 4px 4px 0 rgba(0,0,0,0.3);
		letter-spacing: 8px;
		margin: 0 0 30px 0;
		line-height: 1.2;
	}

	.subtitle {
		font-size: clamp(1rem, 2vw, 1.4rem);
		color: white;
		margin: 0;
	}

	@media (max-width: 1024px) {
		.main-content {
			grid-template-columns: 1fr;
			gap: 40px;
		}

		.character {
			width: 300px;
			height: 450px;
		}

		.arrow-left {
			left: 20px;
		}

		.arrow-right {
			right: 20px;
		}
	}

	@media (max-width: 640px) {
		h1 {
			font-size: 2rem;
			letter-spacing: 4px;
		}

		.character {
			width: 250px;
			height: 375px;
		}

		.arrow-btn {
			width: 40px;
			height: 40px;
		}
	}
</style>

<script>
	// Palettes de couleurs disponibles
	const hoodieColors = [
		'#446eb6', // bleu original
		'#FF6B6B', // rouge
		'#4ECDC4', // cyan
		'#95E1D3', // vert pastel
		'#2C3E50', // dark
		'#E74C3C', // rouge foncé
		'#9B59B6', // violet
		'#F39C12', // orange
	];

	const hairColors = [
		'#446eb6', // bleu original
		'#2C3E50', // noir
		'#8B4513', // marron
		'#FFD700', // blond
		'#DC143C', // rouge
		'#9B59B6', // violet
		'#00CED1', // turquoise
		'#FF1493', // rose
	];

	let currentHoodieIndex = 0;
	let currentHairIndex = 0;

	async function loadSVG() {
		const response = await fetch('/manolia.svg');
		const svgText = await response.text();
		return svgText;
	}

	function updateSVGColors(svgText: string, hoodieColor: string, hairColor: string) {
		let modifiedSVG = svgText;
		
		// Remplacer les couleurs du hoodie (classe .cls-5 et .cls-3)
		modifiedSVG = modifiedSVG.replace(/\.cls-5\s*\{[^}]*fill:\s*#[^;]*;/g, `.cls-5{fill:${hoodieColor};`);
		modifiedSVG = modifiedSVG.replace(/\.cls-3\s*\{[^}]*fill:\s*#[^;]*;/g, `.cls-3{fill:${hoodieColor};`);
		
		// Remplacer les couleurs des cheveux (classe .cls-9 et .cls-18)
		modifiedSVG = modifiedSVG.replace(/\.cls-9\s*\{[^}]*fill:\s*#[^;]*;/g, `.cls-9{fill:${hairColor};`);
		modifiedSVG = modifiedSVG.replace(/\.cls-18\s*\{[^}]*fill:\s*#[^;]*;/g, `.cls-18{fill:${hairColor};`);
		
		return modifiedSVG;
	}

	async function renderCharacter() {
		const svgText = await loadSVG();
		const hoodieColor = hoodieColors[currentHoodieIndex];
		const hairColor = hairColors[currentHairIndex];
		const coloredSVG = updateSVGColors(svgText, hoodieColor, hairColor);
		
		const charElement = document.getElementById('character');
		
		if (charElement) {
			charElement.innerHTML = coloredSVG;
		}
	}

	// Initialisation
	renderCharacter();

	// Flèches gauche/droite : changer couleur du hoodie
	document.getElementById('arrowLeft')?.addEventListener('click', () => {
		currentHoodieIndex = (currentHoodieIndex - 1 + hoodieColors.length) % hoodieColors.length;
		renderCharacter();
	});

	document.getElementById('arrowRight')?.addEventListener('click', () => {
		currentHoodieIndex = (currentHoodieIndex + 1) % hoodieColors.length;
		renderCharacter();
	});

	// Flèches haut/bas : changer couleur des cheveux
	document.getElementById('arrowTop')?.addEventListener('click', () => {
		currentHairIndex = (currentHairIndex - 1 + hairColors.length) % hairColors.length;
		renderCharacter();
	});

	document.getElementById('arrowBottom')?.addEventListener('click', () => {
		currentHairIndex = (currentHairIndex + 1) % hairColors.length;
		renderCharacter();
	});
</script>